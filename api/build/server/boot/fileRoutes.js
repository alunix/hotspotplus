var _0xd0d6=['Y29uc29sZQ==','VnFlRHA=','YVll','cm53bnA=','c3RhdHVz','anNvbg==','V1hoT1o=','ZXJyb3I=','dHJhY2U=','bG9n','d2Fybg==','ZGVidWc=','ZXhjZXB0aW9u','a2huVWM=','dGR5S0o=','Li4vbW9kdWxlcy9jb25maWc=','Y3JlYXRlTG9nZ2Vy','cGF0aA==','SHpX','ZHhvUks=','b0NNY2Q=','b3JpZ2luYWxuYW1l','bG9vcGJhY2s=','Z2V0','bW9kZWxz','RmlsZVN0b3JhZ2U=','cGFyYW1z','ZmlsZUlk','dGhlbg==','NXwxfDB8NHwyfDM=','YmRNWUE=','bWltZVR5cGU=','Y29udGVudEJ1ZmZlcg==','ZW5k','bGVuZ3Ro','S0hPSFI=','YXR0YWNobWVudDsgZmlsZW5hbWU9','bmFtZQ==','YUhoZ1g=','YW55','ZmlsZXM=','ZmlsZW5hbWU=','c2l6ZQ==','Ym9keQ==','YWRkRmlsZQ==','ZmFpbA==','WVJP','TERrY1E=','alVM','YXBwbHk=','cUtC','e30uY29uc3RydWN0b3IoInJldHVybiB0aGlzIikoICk=','Li91cGxvYWRz','dERaekw=','Q1Ftckw=','aENCVHI=','UGtzTGw=','UXZYVUM=','UVlnVFI='];(function(_0x287bc1,_0x257a3d){var _0xc8ba76=function(_0x5f3148){while(--_0x5f3148){_0x287bc1['push'](_0x287bc1['shift']());}};var _0x156a5e=function(){var _0x3f86bb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2568bd,_0x436a26,_0x19782a,_0x307d7a){_0x307d7a=_0x307d7a||{};var _0xb99375=_0x436a26+'='+_0x19782a;var _0x9cf32d=0x0;for(var _0x9cf32d=0x0,_0x2319ae=_0x2568bd['length'];_0x9cf32d<_0x2319ae;_0x9cf32d++){var _0x47540a=_0x2568bd[_0x9cf32d];_0xb99375+=';\x20'+_0x47540a;var _0x509da8=_0x2568bd[_0x47540a];_0x2568bd['push'](_0x509da8);_0x2319ae=_0x2568bd['length'];if(_0x509da8!==!![]){_0xb99375+='='+_0x509da8;}}_0x307d7a['cookie']=_0xb99375;},'removeCookie':function(){return'dev';},'getCookie':function(_0x53be17,_0x2572ad){_0x53be17=_0x53be17||function(_0x1c05c8){return _0x1c05c8;};var _0x3b221b=_0x53be17(new RegExp('(?:^|;\x20)'+_0x2572ad['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x52be21=function(_0x491790,_0x53b578){_0x491790(++_0x53b578);};_0x52be21(_0xc8ba76,_0x257a3d);return _0x3b221b?decodeURIComponent(_0x3b221b[0x1]):undefined;}};var _0x3241cd=function(){var _0x35e649=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x35e649['test'](_0x3f86bb['removeCookie']['toString']());};_0x3f86bb['updateCookie']=_0x3241cd;var _0xac1838='';var _0x44cde8=_0x3f86bb['updateCookie']();if(!_0x44cde8){_0x3f86bb['setCookie'](['*'],'counter',0x1);}else if(_0x44cde8){_0xac1838=_0x3f86bb['getCookie'](null,'counter');}else{_0x3f86bb['removeCookie']();}};_0x156a5e();}(_0xd0d6,0x155));var _0x6d0d=function(_0x56b886,_0x1ff474){_0x56b886=_0x56b886-0x0;var _0x164baf=_0xd0d6[_0x56b886];if(_0x6d0d['initialized']===undefined){(function(){var _0x1662eb;try{var _0x5a9c51=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1662eb=_0x5a9c51();}catch(_0x55e4e9){_0x1662eb=window;}var _0x171570='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x1662eb['atob']||(_0x1662eb['atob']=function(_0x598aea){var _0x5a1747=String(_0x598aea)['replace'](/=+$/,'');for(var _0x1adf2a=0x0,_0x562528,_0x2a64c3,_0x1cdce3=0x0,_0x2eb623='';_0x2a64c3=_0x5a1747['charAt'](_0x1cdce3++);~_0x2a64c3&&(_0x562528=_0x1adf2a%0x4?_0x562528*0x40+_0x2a64c3:_0x2a64c3,_0x1adf2a++%0x4)?_0x2eb623+=String['fromCharCode'](0xff&_0x562528>>(-0x2*_0x1adf2a&0x6)):0x0){_0x2a64c3=_0x171570['indexOf'](_0x2a64c3);}return _0x2eb623;});}());_0x6d0d['base64DecodeUnicode']=function(_0x2c8a5e){var _0x15a389=atob(_0x2c8a5e);var _0x47dacd=[];for(var _0x524a57=0x0,_0x4f5b58=_0x15a389['length'];_0x524a57<_0x4f5b58;_0x524a57++){_0x47dacd+='%'+('00'+_0x15a389['charCodeAt'](_0x524a57)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x47dacd);};_0x6d0d['data']={};_0x6d0d['initialized']=!![];}var _0x5c6489=_0x6d0d['data'][_0x56b886];if(_0x5c6489===undefined){var _0x5b5b7f=function(_0x51bfdc){this['rc4Bytes']=_0x51bfdc;this['states']=[0x1,0x0,0x0];this['newState']=function(){return'newState';};this['firstState']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*';this['secondState']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5b5b7f['prototype']['checkState']=function(){var _0x128a6b=new RegExp(this['firstState']+this['secondState']);return this['runState'](_0x128a6b['test'](this['newState']['toString']())?--this['states'][0x1]:--this['states'][0x0]);};_0x5b5b7f['prototype']['runState']=function(_0x866ce6){if(!Boolean(~_0x866ce6)){return _0x866ce6;}return this['getState'](this['rc4Bytes']);};_0x5b5b7f['prototype']['getState']=function(_0x2cfd3d){for(var _0x23f373=0x0,_0x59fbf2=this['states']['length'];_0x23f373<_0x59fbf2;_0x23f373++){this['states']['push'](Math['round'](Math['random']()));_0x59fbf2=this['states']['length'];}return _0x2cfd3d(this['states'][0x0]);};new _0x5b5b7f(_0x6d0d)['checkState']();_0x164baf=_0x6d0d['base64DecodeUnicode'](_0x164baf);_0x6d0d['data'][_0x56b886]=_0x164baf;}else{_0x164baf=_0x5c6489;}return _0x164baf;};var _0x42e325=function(){var _0x4e28f0=!![];return function(_0x13b6c1,_0x3ffbc6){var _0x3dec9d=_0x4e28f0?function(){if(_0x3ffbc6){var _0x33a87c=_0x3ffbc6['apply'](_0x13b6c1,arguments);_0x3ffbc6=null;return _0x33a87c;}}:function(){};_0x4e28f0=![];return _0x3dec9d;};}();var _0x265ae5=_0x42e325(this,function(){var _0x2dafbe=function(){return'\x64\x65\x76';},_0x5d04de=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x41bbb3=function(){var _0x5a55a3=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5a55a3['\x74\x65\x73\x74'](_0x2dafbe['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x585166=function(){var _0x4b72b0=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4b72b0['\x74\x65\x73\x74'](_0x5d04de['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3ff8df=function(_0x5b9b89){var _0x43bca1=~-0x1>>0x1+0xff%0x0;if(_0x5b9b89['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x43bca1)){_0x364286(_0x5b9b89);}};var _0x364286=function(_0x8196ed){var _0x577834=~-0x4>>0x1+0xff%0x0;if(_0x8196ed['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x577834){_0x3ff8df(_0x8196ed);}};if(!_0x41bbb3()){if(!_0x585166()){_0x3ff8df('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3ff8df('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3ff8df('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x265ae5();var _0x4d34ad=function(){var _0xcc8889=!![];return function(_0x1ed111,_0x5cfd17){var _0x5b2dcc=_0xcc8889?function(){var _0x5a5d3b={'DEVUG':function _0x25a961(_0x285ee0,_0x1b938c){return _0x285ee0!==_0x1b938c;},'LDkcQ':_0x6d0d('0x0')};if(_0x5a5d3b['DEVUG'](_0x5a5d3b[_0x6d0d('0x1')],_0x6d0d('0x2'))){if(_0x5cfd17){var _0x5e83ee=_0x5cfd17[_0x6d0d('0x3')](_0x1ed111,arguments);_0x5cfd17=null;return _0x5e83ee;}}else{var _0x29b06a=_0x5cfd17['apply'](_0xe187cb,_0x455f16);_0x3f1d78=null;return _0x42737c;}}:function(){};_0xcc8889=![];return _0x5b2dcc;};}();var _0x240b37=_0x4d34ad(this,function(){var _0x1cd4b6={'VqeDp':function _0x2bdd4f(_0x526d8e,_0x2c57ba){return _0x526d8e===_0x2c57ba;},'rnwnp':'LQZ','WXhOZ':'6|7|0|4|3|1|8|5|2','tDZzL':_0x6d0d('0x4'),'CQmrL':function _0x40f2dc(_0xa0fc27,_0x5a06f8){return _0xa0fc27(_0x5a06f8);},'hCBTr':function _0x59fb27(_0x450ae4,_0x5c3128){return _0x450ae4+_0x5c3128;},'PksLl':'return\x20(function()\x20','QvXUC':_0x6d0d('0x5'),'QYgTR':function _0x59be6f(_0x4f6718){return _0x4f6718();},'khnUc':function _0x16e042(_0x2a8b2d,_0x4c06ec,_0x3f73df){return _0x2a8b2d(_0x4c06ec,_0x3f73df);},'tdyKJ':_0x6d0d('0x6')};if(_0x6d0d('0x4')===_0x1cd4b6[_0x6d0d('0x7')]){var _0x404eb6=function(){};var _0x3e6fc7;try{var _0x40519c=_0x1cd4b6[_0x6d0d('0x8')](Function,_0x1cd4b6[_0x6d0d('0x9')](_0x1cd4b6[_0x6d0d('0xa')]+_0x1cd4b6[_0x6d0d('0xb')],');'));_0x3e6fc7=_0x1cd4b6[_0x6d0d('0xc')](_0x40519c);}catch(_0x32dc02){_0x3e6fc7=window;}if(!_0x3e6fc7['console']){_0x3e6fc7[_0x6d0d('0xd')]=function(_0x486f74){if(_0x1cd4b6[_0x6d0d('0xe')](_0x6d0d('0xf'),_0x1cd4b6[_0x6d0d('0x10')])){return res[_0x6d0d('0x11')](0xc8)[_0x6d0d('0x12')]({'_0x541bdc':_0x1d5342});}else{var _0x598cf3=_0x1cd4b6[_0x6d0d('0x13')]['split']('|'),_0x2a0af1=0x0;while(!![]){switch(_0x598cf3[_0x2a0af1++]){case'0':_0x2217e3['warn']=_0x486f74;continue;case'1':_0x2217e3[_0x6d0d('0x14')]=_0x486f74;continue;case'2':return _0x2217e3;continue;case'3':_0x2217e3['info']=_0x486f74;continue;case'4':_0x2217e3['debug']=_0x486f74;continue;case'5':_0x2217e3[_0x6d0d('0x15')]=_0x486f74;continue;case'6':var _0x2217e3={};continue;case'7':_0x2217e3[_0x6d0d('0x16')]=_0x486f74;continue;case'8':_0x2217e3['exception']=_0x486f74;continue;}break;}}}(_0x404eb6);}else{_0x3e6fc7[_0x6d0d('0xd')][_0x6d0d('0x16')]=_0x404eb6;_0x3e6fc7[_0x6d0d('0xd')][_0x6d0d('0x17')]=_0x404eb6;_0x3e6fc7[_0x6d0d('0xd')][_0x6d0d('0x18')]=_0x404eb6;_0x3e6fc7[_0x6d0d('0xd')]['info']=_0x404eb6;_0x3e6fc7[_0x6d0d('0xd')][_0x6d0d('0x14')]=_0x404eb6;_0x3e6fc7[_0x6d0d('0xd')][_0x6d0d('0x19')]=_0x404eb6;_0x3e6fc7[_0x6d0d('0xd')][_0x6d0d('0x15')]=_0x404eb6;}}else{_0x1cd4b6[_0x6d0d('0x1a')](_0x28a57c,null,_0x1cd4b6[_0x6d0d('0x1b')]);}});_0x240b37();var config=require(_0x6d0d('0x1c'));var logger=require('../modules/logger');var log=logger[_0x6d0d('0x1d')]();var multer=require('multer');var path=require(_0x6d0d('0x1e'));var storage=multer['diskStorage']({'storage':function(_0x31f367,_0x1dd68d,_0x51ec51){var _0x29d7b8={'isuaz':function _0x4aa805(_0x2a6ee6,_0x226d8c){return _0x2a6ee6===_0x226d8c;},'dxoRK':_0x6d0d('0x1f'),'oCMcd':function _0x249760(_0x4ec9d8,_0x301261,_0x5552d5){return _0x4ec9d8(_0x301261,_0x5552d5);}};if(_0x29d7b8['isuaz'](_0x29d7b8[_0x6d0d('0x20')],_0x29d7b8['dxoRK'])){_0x29d7b8[_0x6d0d('0x21')](_0x51ec51,null,_0x6d0d('0x6'));}else{return res[_0x6d0d('0x11')](0x1f4)['json']({'_0xa55706':_0x3d84ff});}},'filename':function(_0x355c16,_0x271334,_0xa1025e){var _0x1bd5bb={'CjcbH':function _0x5d74a4(_0xdbcdb0,_0x5772c2,_0x1f3fa4){return _0xdbcdb0(_0x5772c2,_0x1f3fa4);}};_0x1bd5bb['CjcbH'](_0xa1025e,null,_0x271334[_0x6d0d('0x22')]);}});var upload=multer({'storage':storage});module['exports']=function(_0x2ffe03){var _0x3b9635={'aHhgX':'/api/file/upload'};var _0x20e7a6=_0x2ffe03[_0x6d0d('0x23')]['Router']();_0x20e7a6[_0x6d0d('0x24')]('/api/file/download/:fileId',function(_0x59fca4,_0x5983ed){var _0x406bc6=_0x2ffe03[_0x6d0d('0x25')][_0x6d0d('0x26')];var _0x14985a=_0x59fca4[_0x6d0d('0x27')][_0x6d0d('0x28')];_0x406bc6['readFile'](_0x14985a)[_0x6d0d('0x29')](function(_0x532ad1){var _0x4bd146={'bdMYA':_0x6d0d('0x2a'),'KHOHR':function _0x2bede1(_0x201c3b,_0x324487){return _0x201c3b+_0x324487;}};var _0x54837e=_0x4bd146[_0x6d0d('0x2b')]['split']('|'),_0x59b26c=0x0;while(!![]){switch(_0x54837e[_0x59b26c++]){case'0':var _0x118367=_0x532ad1[_0x6d0d('0x2c')];continue;case'1':var _0x562f41=_0x532ad1[_0x6d0d('0x2d')];continue;case'2':_0x5983ed['write'](_0x562f41);continue;case'3':_0x5983ed[_0x6d0d('0x2e')]();continue;case'4':_0x5983ed['writeHead'](0xc8,{'Content-Type':_0x118367,'Content-Length':_0x562f41[_0x6d0d('0x2f')],'Content-Disposition':_0x4bd146[_0x6d0d('0x30')](_0x6d0d('0x31'),_0x5ab304)});continue;case'5':var _0x5ab304=_0x532ad1[_0x6d0d('0x32')];continue;}break;}})['fail'](function(_0x2459dc){return _0x5983ed[_0x6d0d('0x11')](0x1f4)[_0x6d0d('0x12')]({'error':_0x2459dc});});});_0x20e7a6['post'](_0x3b9635[_0x6d0d('0x33')],upload[_0x6d0d('0x34')](),function(_0x35493b,_0x4eef6f){var _0xcf9a6b=_0x2ffe03['models'][_0x6d0d('0x26')];var _0x5d8846=_0x35493b[_0x6d0d('0x35')][0x0];var _0x4cdb3f=_0x5d8846['mimetype'];var _0x39235f=_0x5d8846[_0x6d0d('0x36')];var _0x49cd71=_0x5d8846[_0x6d0d('0x37')];var _0x2a8abd=_0x35493b[_0x6d0d('0x38')]['businessId'];_0xcf9a6b[_0x6d0d('0x39')](_0x2a8abd,_0x5d8846[_0x6d0d('0x1e')],_0x4cdb3f,_0x39235f,_0x49cd71)[_0x6d0d('0x29')](function(_0x3cb946){return _0x4eef6f[_0x6d0d('0x11')](0xc8)['json']({'fileId':_0x3cb946});})[_0x6d0d('0x3a')](function(_0x532db1){return _0x4eef6f[_0x6d0d('0x11')](0x1f4)[_0x6d0d('0x12')]({'error':_0x532db1});});});_0x2ffe03['use'](_0x20e7a6);};