var _0x5fab=['c2VsZWN0ZWRUaGVtZUlk','Y29udHJvbGxlcg==','dGVtcGxhdGU=','bG9hZFRoZW1lQ29uZmlnQnlJZA==','U0VDT05EX1JBRElVU19JUA==','UkFESVVTX0FVVEhfUE9SVA==','bG9hZFJhZGl1c0luZm8=','Z2V0TWlrcm90aWtTY3JpcHRz','bmFzU2NyaXB0cw==','emlwSXQ=','LnppcA==','Zm9sZGVy','aG90c3BvdHBsdXM=','U0NSSVBUUw==','TUlLUk9USUtfSE9UU1BPVF9QQUdFUw==','Z2V0TmFzQ3JlZGVudGlhbA==','UFJJTUFSWV9TSEFSRURfU0VDUkVU','bG9hZEJ5SWQ=','cmVhZEZyb21DYWNoZQ==','ZnJvbSBkYi4uLg==','Y2FjaGVJdA==','YXBwbHk=','cmV0dXJuIChmdW5jdGlvbigpIA==','Y29uc29sZQ==','bG9n','d2Fybg==','ZGVidWc=','ZXhjZXB0aW9u','dHJhY2U=','ZXJyb3I=','Li4vLi4vc2VydmVyL21vZHVsZXMvbG9nZ2Vy','Li4vLi4vc2VydmVyL3NlcnZlcg==','Li4vLi4vc2VydmVyL21vZHVsZXMvdXRpbGl0eQ==','Li4vLi4vc2VydmVyL21vZHVsZXMvY29uZmln','Li4vLi4vc2VydmVyL21vZHVsZXMvaHNwQ2FjaGU=','ZXhwb3J0cw==','dmFsaWRhdGVzVW5pcXVlbmVzc09m','Y3JlYXRlTG9nZ2Vy','b2JzZXJ2ZQ==','bG9hZGVk','ZGF0YQ==','YWNjZXNzUG9pbnRUeXBl','aW5zdGFuY2U=','aXNOZXdJbnN0YW5jZQ==','Y3JlYXRpb25EYXRl','dXBkYXRlRGF0ZQ==','bWFj','dHJpbU1hYw==','aW52YWxpZCBtYWMgYWRkcmVzcw==','cG9ydA==','bmFzIGNyZWF0ZWQgOiA=','bG9hZFJvdXRlckluZm8=','ZmluZEJ5SWQ=','dGhlbg==','bG9hZGluZyBuYXMgaWQ=','bWVzc2FnZQ==','cm91dGVyTm90Rm91bmQ=','c3RhdHVz','bG9hZGVkIG5hcyA=','cmVtb3RlTWV0aG9k','TG9hZCByb3V0ZXIgaW5mbw==','bmFzSWQ=','c3RyaW5n','QnVzaW5lc3M=','bW9kZWxz','YnVzaW5lc3NJZA==','dGhlbWVDb25maWc='];(function(_0x408815,_0x395cd2){var _0x2aebbf=function(_0x6b3120){while(--_0x6b3120){_0x408815['push'](_0x408815['shift']());}};var _0x42812f=function(){var _0x531a69={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x443f17,_0x26fbeb,_0xb97b71,_0x178117){_0x178117=_0x178117||{};var _0x283ab1=_0x26fbeb+'='+_0xb97b71;var _0x1a866a=0x0;for(var _0x1a866a=0x0,_0x3daff7=_0x443f17['length'];_0x1a866a<_0x3daff7;_0x1a866a++){var _0x3671e1=_0x443f17[_0x1a866a];_0x283ab1+=';\x20'+_0x3671e1;var _0x5c49cc=_0x443f17[_0x3671e1];_0x443f17['push'](_0x5c49cc);_0x3daff7=_0x443f17['length'];if(_0x5c49cc!==!![]){_0x283ab1+='='+_0x5c49cc;}}_0x178117['cookie']=_0x283ab1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2f25b0,_0x3076b6){_0x2f25b0=_0x2f25b0||function(_0x24f736){return _0x24f736;};var _0x312149=_0x2f25b0(new RegExp('(?:^|;\x20)'+_0x3076b6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3ab3ea=function(_0x5b03f0,_0x4d2b81){_0x5b03f0(++_0x4d2b81);};_0x3ab3ea(_0x2aebbf,_0x395cd2);return _0x312149?decodeURIComponent(_0x312149[0x1]):undefined;}};var _0x2eaacb=function(){var _0x54675f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x54675f['test'](_0x531a69['removeCookie']['toString']());};_0x531a69['updateCookie']=_0x2eaacb;var _0x201afa='';var _0x38cd54=_0x531a69['updateCookie']();if(!_0x38cd54){_0x531a69['setCookie'](['*'],'counter',0x1);}else if(_0x38cd54){_0x201afa=_0x531a69['getCookie'](null,'counter');}else{_0x531a69['removeCookie']();}};_0x42812f();}(_0x5fab,0x121));var _0xb5fa=function(_0x121bb8,_0x167117){_0x121bb8=_0x121bb8-0x0;var _0x371d9e=_0x5fab[_0x121bb8];if(_0xb5fa['initialized']===undefined){(function(){var _0x8d1613;try{var _0x46d967=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x8d1613=_0x46d967();}catch(_0x452054){_0x8d1613=window;}var _0x51938b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x8d1613['atob']||(_0x8d1613['atob']=function(_0x1dd70b){var _0xe3cc44=String(_0x1dd70b)['replace'](/=+$/,'');for(var _0x29bc9f=0x0,_0x479b43,_0x56be3f,_0x570410=0x0,_0x9c59e4='';_0x56be3f=_0xe3cc44['charAt'](_0x570410++);~_0x56be3f&&(_0x479b43=_0x29bc9f%0x4?_0x479b43*0x40+_0x56be3f:_0x56be3f,_0x29bc9f++%0x4)?_0x9c59e4+=String['fromCharCode'](0xff&_0x479b43>>(-0x2*_0x29bc9f&0x6)):0x0){_0x56be3f=_0x51938b['indexOf'](_0x56be3f);}return _0x9c59e4;});}());_0xb5fa['base64DecodeUnicode']=function(_0xb067bd){var _0x28e82d=atob(_0xb067bd);var _0x1249c0=[];for(var _0x2fc93c=0x0,_0x10b053=_0x28e82d['length'];_0x2fc93c<_0x10b053;_0x2fc93c++){_0x1249c0+='%'+('00'+_0x28e82d['charCodeAt'](_0x2fc93c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1249c0);};_0xb5fa['data']={};_0xb5fa['initialized']=!![];}var _0x1dde00=_0xb5fa['data'][_0x121bb8];if(_0x1dde00===undefined){var _0x2b4386=function(_0x7b3a49){this['rc4Bytes']=_0x7b3a49;this['states']=[0x1,0x0,0x0];this['newState']=function(){return'newState';};this['firstState']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*';this['secondState']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2b4386['prototype']['checkState']=function(){var _0xa70efd=new RegExp(this['firstState']+this['secondState']);return this['runState'](_0xa70efd['test'](this['newState']['toString']())?--this['states'][0x1]:--this['states'][0x0]);};_0x2b4386['prototype']['runState']=function(_0x33f350){if(!Boolean(~_0x33f350)){return _0x33f350;}return this['getState'](this['rc4Bytes']);};_0x2b4386['prototype']['getState']=function(_0x30e771){for(var _0x5d67bf=0x0,_0xcd318b=this['states']['length'];_0x5d67bf<_0xcd318b;_0x5d67bf++){this['states']['push'](Math['round'](Math['random']()));_0xcd318b=this['states']['length'];}return _0x30e771(this['states'][0x0]);};new _0x2b4386(_0xb5fa)['checkState']();_0x371d9e=_0xb5fa['base64DecodeUnicode'](_0x371d9e);_0xb5fa['data'][_0x121bb8]=_0x371d9e;}else{_0x371d9e=_0x1dde00;}return _0x371d9e;};var _0x4a5f0f=function(){var _0x2c91e9=!![];return function(_0x2fb965,_0x13f0ff){var _0xb39edf=_0x2c91e9?function(){if(_0x13f0ff){var _0x21e9c4=_0x13f0ff['apply'](_0x2fb965,arguments);_0x13f0ff=null;return _0x21e9c4;}}:function(){};_0x2c91e9=![];return _0xb39edf;};}();var _0x293c19=_0x4a5f0f(this,function(){var _0x55ea15=function(){return'\x64\x65\x76';},_0x1d7519=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x30b9a2=function(){var _0x1c04d3=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1c04d3['\x74\x65\x73\x74'](_0x55ea15['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x454943=function(){var _0x5d8e8f=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x5d8e8f['\x74\x65\x73\x74'](_0x1d7519['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5ce18c=function(_0x3c5408){var _0x10480=~-0x1>>0x1+0xff%0x0;if(_0x3c5408['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x10480)){_0x269b84(_0x3c5408);}};var _0x269b84=function(_0x537ed9){var _0x3582d4=~-0x4>>0x1+0xff%0x0;if(_0x537ed9['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3582d4){_0x5ce18c(_0x537ed9);}};if(!_0x30b9a2()){if(!_0x454943()){_0x5ce18c('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5ce18c('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5ce18c('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x293c19();var _0x417d16=function(){var _0x3c805d=!![];return function(_0x292a32,_0x29ce2a){var _0x434887=_0x3c805d?function(){if(_0x29ce2a){var _0x333a34=_0x29ce2a[_0xb5fa('0x0')](_0x292a32,arguments);_0x29ce2a=null;return _0x333a34;}}:function(){};_0x3c805d=![];return _0x434887;};}();var _0x3e521c=_0x417d16(this,function(){var _0x29390a=function(){};var _0x4341d3;try{var _0x10361d=Function(_0xb5fa('0x1')+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4341d3=_0x10361d();}catch(_0x5d70f6){_0x4341d3=window;}if(!_0x4341d3[_0xb5fa('0x2')]){_0x4341d3[_0xb5fa('0x2')]=function(_0x9c7bce){var _0x56d018={};_0x56d018[_0xb5fa('0x3')]=_0x9c7bce;_0x56d018[_0xb5fa('0x4')]=_0x9c7bce;_0x56d018[_0xb5fa('0x5')]=_0x9c7bce;_0x56d018['info']=_0x9c7bce;_0x56d018['error']=_0x9c7bce;_0x56d018[_0xb5fa('0x6')]=_0x9c7bce;_0x56d018[_0xb5fa('0x7')]=_0x9c7bce;return _0x56d018;}(_0x29390a);}else{_0x4341d3[_0xb5fa('0x2')][_0xb5fa('0x3')]=_0x29390a;_0x4341d3[_0xb5fa('0x2')][_0xb5fa('0x4')]=_0x29390a;_0x4341d3[_0xb5fa('0x2')][_0xb5fa('0x5')]=_0x29390a;_0x4341d3[_0xb5fa('0x2')]['info']=_0x29390a;_0x4341d3[_0xb5fa('0x2')][_0xb5fa('0x8')]=_0x29390a;_0x4341d3['console'][_0xb5fa('0x6')]=_0x29390a;_0x4341d3['console'][_0xb5fa('0x7')]=_0x29390a;}});_0x3e521c();var logger=require(_0xb5fa('0x9'));var app=require(_0xb5fa('0xa'));var utility=require(_0xb5fa('0xb'));var config=require(_0xb5fa('0xc'));var Q=require('q');var hotspotMessages=require('../../server/modules/hotspotMessages');var hotspotTemplates=require('../../server/modules/hotspotTemplates');const hspCache=require(_0xb5fa('0xd'));module[_0xb5fa('0xe')]=function(_0x31f252){_0x31f252[_0xb5fa('0xf')]('nasIpPortKey');var _0x4fabcc=logger[_0xb5fa('0x10')]();_0x31f252[_0xb5fa('0x11')](_0xb5fa('0x12'),function(_0x46eef0,_0x324ba5){if(_0x46eef0[_0xb5fa('0x13')]){if(_0x46eef0[_0xb5fa('0x13')][_0xb5fa('0x14')]){_0x46eef0[_0xb5fa('0x13')][_0xb5fa('0x14')]=_0x46eef0[_0xb5fa('0x13')][_0xb5fa('0x14')]['toLowerCase']();}}_0x324ba5();});_0x31f252[_0xb5fa('0x11')]('before\x20save',function(_0x37ae06,_0x4a6c04){if(_0x37ae06[_0xb5fa('0x15')]&&_0x37ae06[_0xb5fa('0x16')]){_0x37ae06['instance'][_0xb5fa('0x17')]=_0x37ae06[_0xb5fa('0x15')][_0xb5fa('0x18')]=new Date();if(_0x37ae06['instance'][_0xb5fa('0x19')]){if(_0x37ae06[_0xb5fa('0x15')][_0xb5fa('0x19')]['match'](/[a-z]/i)){_0x37ae06[_0xb5fa('0x15')]['mac']=utility[_0xb5fa('0x1a')](_0x37ae06[_0xb5fa('0x15')][_0xb5fa('0x19')]);_0x37ae06[_0xb5fa('0x15')]['id']=_0x37ae06[_0xb5fa('0x15')][_0xb5fa('0x19')];}else{return _0x4a6c04(_0xb5fa('0x1b'));}}if(_0x37ae06[_0xb5fa('0x15')]['ip']&&_0x37ae06['instance']['port']){_0x37ae06['nasIpPortKey']=_0x37ae06['instance']['ip']+_0x37ae06[_0xb5fa('0x15')][_0xb5fa('0x1c')];}_0x4fabcc[_0xb5fa('0x5')](_0xb5fa('0x1d'),_0x37ae06[_0xb5fa('0x15')]);}_0x4a6c04();});_0x31f252[_0xb5fa('0x1e')]=function(_0x358549,_0x353314){_0x31f252[_0xb5fa('0x1f')](_0x358549)[_0xb5fa('0x20')](function(_0x142bfa){_0x4fabcc[_0xb5fa('0x5')](_0xb5fa('0x21'),_0x358549);if(!_0x142bfa){var _0x1f4380=new Error();_0x1f4380[_0xb5fa('0x22')]=hotspotMessages[_0xb5fa('0x23')];_0x1f4380[_0xb5fa('0x24')]=0x194;return _0x353314(_0x1f4380);}_0x4fabcc[_0xb5fa('0x5')](_0xb5fa('0x25'),_0x142bfa);return _0x353314(null,_0x142bfa);});};_0x31f252[_0xb5fa('0x26')](_0xb5fa('0x1e'),{'description':_0xb5fa('0x27'),'accepts':[{'arg':_0xb5fa('0x28'),'type':_0xb5fa('0x29'),'required':!![]}],'returns':{'root':!![]}});_0x31f252['loadThemeConfigById']=function(_0x2cc6cb,_0x4d056c){var _0x5c7fdd=app['models'][_0xb5fa('0x2a')];var _0x502d57=app[_0xb5fa('0x2b')]['Theme'];_0x31f252['loadRouterInfo'](_0x2cc6cb,function(_0x1847bc,_0x934b49){if(_0x1847bc){_0x4fabcc['error'](_0x1847bc);return _0x4d056c(_0x1847bc);}_0x5c7fdd['loadConfig'](_0x934b49[_0xb5fa('0x2c')],function(_0x9cf63d,_0x252421){if(_0x9cf63d){_0x4fabcc['error'](_0x9cf63d);return _0x4d056c(_0x9cf63d);}_0x252421[_0xb5fa('0x28')]=_0x934b49['id'];_0x252421[_0xb5fa('0x14')]=_0x934b49['accessPointType'];_0x252421[_0xb5fa('0x2c')]=_0x934b49[_0xb5fa('0x2c')];_0x252421[_0xb5fa('0x2d')]['controller']=hotspotTemplates[_0x252421[_0xb5fa('0x2e')]][_0xb5fa('0x2f')];_0x252421[_0xb5fa('0x2d')]['template']=hotspotTemplates[_0x252421[_0xb5fa('0x2e')]][_0xb5fa('0x30')];return _0x4d056c(null,_0x252421);});});};_0x31f252[_0xb5fa('0x26')](_0xb5fa('0x31'),{'description':'Load\x20loadThemeConfigById\x20','accepts':[{'arg':'nasId','type':'string','required':!![]}],'returns':{'root':!![]}});_0x31f252['loadRadiusInfo']=function(_0x5989e1){return _0x5989e1(null,{'radiusIp':config['RADIUS_IP'],'secondRadiusIp':config[_0xb5fa('0x32')],'accountingPort':config['RADIUS_ACC_PORT'],'authenticationPort':config[_0xb5fa('0x33')]});};_0x31f252[_0xb5fa('0x26')](_0xb5fa('0x34'),{'description':_0xb5fa('0x27'),'accepts':[],'returns':{'root':!![]}});_0x31f252[_0xb5fa('0x35')]=function(_0x269d21,_0x4b4c4c){var _0x57efb3=app['models'][_0xb5fa('0x2a')];return Q['promise'](function(_0x73d425,_0x5addd5){var _0x58aa97=_0xb5fa('0x36');utility[_0xb5fa('0x37')](_0x58aa97+_0xb5fa('0x38'),[{'type':_0xb5fa('0x39'),'name':_0xb5fa('0x3a'),'files':config[_0xb5fa('0x3b')][_0xb5fa('0x3c')]}])[_0xb5fa('0x20')](function(_0x19e370){_0x4fabcc[_0xb5fa('0x5')](_0x19e370);return _0x73d425(_0x19e370);})['fail'](function(_0x284bbb){_0x4fabcc['error'](_0x284bbb);return _0x5addd5(_0x284bbb);});});};_0x31f252[_0xb5fa('0x3d')]=function(){return config[_0xb5fa('0x3e')];};_0x31f252[_0xb5fa('0x3f')]=async _0x2ef359=>{const _0x1c706b=await hspCache[_0xb5fa('0x40')](_0x2ef359);if(_0x1c706b){return _0x1c706b;}const _0x3414b2=await _0x31f252[_0xb5fa('0x1f')](_0x2ef359);_0x4fabcc['warn'](_0xb5fa('0x41'),_0x3414b2);hspCache[_0xb5fa('0x42')](_0x2ef359,_0x3414b2);return _0x3414b2;};};